# bug
1. ✅ 大雷一次用掉了3个,应该时一次用一个 - 已修复

# 需求
1. ✅ 设计玩家子弹有多种丰富的类型和级别, 威力和子弹形式都不一样, 击掉敌人掉落各种子弹增强 - 已完成
2. ✅ 敌人也会向玩家发射慢速子弹,要区分敌我双方子弹显示效果 - 已完成


## 已实现功能

1. ✅ 增强效果持续到被击中才会消失 - 已完成
   - 修改了增强效果机制，不再基于时间衰减
   - 玩家被击中时会清除所有增强效果（护盾除外）
   - 护盾可以抵挡一次攻击后消失

2. ✅ 增加大雷, 发射后清理屏幕内全部非boss的敌方, boss扣血1/5, 每个玩家有3个大雷, 大雷有几率从被打死的敌机中产生, 大雷有特别的显示效果和音效 - 已完成
   - 每个玩家初始有3个大雷，最多3个
   - 控制方式: 玩家1-Shift键，玩家2-Ctrl键，手柄Y/Triangle和LB键
   - 大雷效果: 清除所有非boss敌人，boss扣1/5血量，清除敌人子弹
   - 15%几率从敌人掉落大雷道具
   - 特殊视觉效果: 金黄色炸弹图标，闪烁火花，全屏闪光爆炸
   - 专用音效: 多层频率叠加的爆炸音效
   - 强力震动反馈效果
   
3. ✅ 大雷bug修复 - 已完成
   - 修复了大雷一次使用3个的问题
   - 添加了大雷冷却时间机制（500ms）
   - 确保每次按键只消耗1个大雷

4. ✅ 多种子弹类型和级别系统 - 已完成
   - 实现了7种子弹类型: basic, piercing, explosive, laser, plasma, homing, scatter
   - 每种子弹都有5个级别，级别越高威力越大
   - 每种子弹都有独特的视觉效果、行为和伤害
   - 玩家可以解锁和升级不同类型的子弹
   
5. ✅ 子弹增强掉落系统 - 已完成
   - 敌人被击败时会掉落子弹升级道具
   - 掉落几率根据敌人类型调整（5%-80%）
   - 根据关卡限制高级子弹类型的掉落
   - Boss有更高几率掉落多种子弹升级
   
6. ✅ 敌人子弹系统升级 - 已完成
   - 敌人子弹使用红色/橙色配色方案，与玩家蓝绿色区分
   - 不同类型敌人发射不同类型的子弹
   - Boss拥有复杂的弹幕模式，使用多种高级子弹类型
   - 所有敌人子弹都正确标记为isPlayer: false

